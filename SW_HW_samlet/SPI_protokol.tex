\chapter{SPI-protokol}
\label{SPI-prot}

I nedenstående sektioner vil DevKit8000 blive refereret til som DK8k,
master-PSoC'en som MASTER, de to slave-PSoCs som TOP og BOTTOM.

\section{Kommandoer}
\subsection{Fra DK8k til MASTER}

\begin{table}[H]
\begin{tabular}{| l | r |}
\hline
Kommando & Værdi\\\hline
GET\_STATUS & 0x00\\\hline
LOCATE\_XY & 0x01\\\hline
OPEN\_BOTTLE & 0x04\\\hline
\end{tabular}
\end{table}

\subsection{Fra MASTER til TOP}

\begin{table}[H]
\begin{tabular}{| l | r |}
\hline
Kommando & Vaerdi\\\hline
GET\_STATUS & 0x00\\\hline
LOCATE\_XY & 0x01\\\hline
LOCATE\_Z\_1 & 0x02\\\hline
LOCATE\_Z\_2 & 0x03\\\hline
OPEN\_BOTTLE & 0x04\\\hline
RESET & 0x05\\\hline
DISPENSE\_CORK & 0x06\\\hline
\end{tabular}
\end{table}

\subsection{Fra MASTER til BOTTOM}

\begin{table}[H]
\begin{tabular}{| l | r |}
\hline
Kommando & Vaerdi\\\hline
GET\_STATUS & 0x00\\\hline
LOCATE\_Z\_1 & 0x02\\\hline
LOCATE\_Z\_2 & 0x03\\\hline
RESET & 0x05\\\hline
\end{tabular}
\end{table}

\section{Feedback}
\subsection{Fra MASTER til DK8k}

\begin{table}[H]
\begin{tabular}{| l | r |}
\hline
Besked & Vaerdi\\\hline
VALID\_TYPE & 0x14\\\hline
INVALID\_TYPE & 0x21\\\hline
NO\_BOTTLE & 0x22\\\hline
DEFAULT & 0x30\\\hline
WRONG\_COMMAND & 0x31\\\hline
WRONG\_DEVICE & 0x32\\\hline
IN\_PROCESS & 0x33\\\hline
\end{tabular}
\end{table}

\subsection{Fra TOP til MASTER}

\begin{table}[H]
\begin{tabular}{| l | r |}
\hline
Besked & Vaerdi\\\hline
VALID\_XY & 0x14\\\hline
INVALID\_XY & 0x20\\\hline
VALID\_Z & 0x13\\\hline
VALID\_TYPE & 0x14\\\hline
INVALID\_TYPE & 0x21\\\hline
NO\_BOTTLE & 0x22\\\hline
OPENING\_SUCCESSFUL & 0x15\\\hline
RESET\_XY\_ON\_SUCCESS & 0x35\\\hline
CORK\_DISPENSED & 0x16\\\hline
READY\_TO\_DRINK & 0x17\\\hline
DEFAULT & 0x30\\\hline
WRONG\_COMMAND & 0x31\\\hline
IN\_PROCESS & 0x33\\\hline
\end{tabular}
\end{table}

\subsection{Fra BOTTOM til MASTER}

\begin{table}[H]
\begin{tabular}{| l | r |}
\hline
Besked & Vaerdi\\\hline
MOVED\_Z\_1 & 0x11\\\hline
MOVED\_Z\_2 & 0x12\\\hline
RESET\_Z & 0x34\\\hline
DEFAULT & 0x30\\\hline
WRONG\_COMMAND & 0x31\\\hline
IN\_PROCESS & 0x33\\\hline
\end{tabular}
\end{table}